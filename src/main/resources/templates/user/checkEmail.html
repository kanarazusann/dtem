<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>이메일 중복 확인</title>
<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}
	body {
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		padding: 20px;
		background: #f8f9fa;
	}
	.container {
		background: #fff;
		padding: 30px;
		border-radius: 12px;
		box-shadow: 0 2px 10px rgba(0,0,0,.1);
		max-width: 400px;
		margin: 0 auto;
	}
	h2 {
		color: #667eea;
		margin-bottom: 20px;
		text-align: center;
	}
	.message {
		padding: 15px;
		border-radius: 8px;
		margin-bottom: 20px;
		text-align: center;
		font-size: 16px;
	}
	.success {
		background: #d4edda;
		color: #155724;
		border: 1px solid #c3e6cb;
	}
	.error {
		background: #f8d7da;
		color: #721c24;
		border: 1px solid #f5c6cb;
	}
	.form-group {
		margin-bottom: 15px;
	}
	label {
		display: block;
		margin-bottom: 8px;
		font-weight: 600;
		color: #333;
	}
	input[type="email"] {
		width: 100%;
		padding: 12px;
		border: 2px solid #e0e0e0;
		border-radius: 8px;
		font-size: 14px;
	}
	input[type="email"]:focus {
		outline: none;
		border-color: #667eea;
	}
	.btn {
		padding: 12px 20px;
		border: none;
		border-radius: 8px;
		cursor: pointer;
		font-weight: 600;
		font-size: 14px;
		width: 100%;
		margin-top: 10px;
	}
	.btn-primary {
		background: linear-gradient(135deg, #667eea, #764ba2);
		color: #fff;
	}
	.btn-primary:hover {
		opacity: 0.9;
	}
	.btn-success {
		background: linear-gradient(135deg, #3a5a40, #2F9D27);
		color: #fff;
	}
	.btn-success:hover {
		opacity: 0.9;
	}
</style>
<script type="text/javascript" th:inline="javascript">
	function checkEmailClose() {
		var email = /*[[${email}]]*/ "user@example.com";
		// opener : 현재 브라우저의 부모 브라우저를 관리하는 내장 객체
		opener.frm.email.value = email;
		window.close(); // 현재 브라우저 닫기
		opener.frm.pwd.focus();
	}
</script>
</head>
<body>
	<div class="container">
		<h2>이메일 중복 확인</h2>
		
		<!-- 이메일이 존재할 때 -->
		<th:block th:if="${isExist}">
			<div class="message error">
				<strong>[[${email}]]</strong><br>
				이미 사용중인 이메일입니다.
			</div>
			<form action="/user/checkEmail" method="get">
				<div class="form-group">
					<label for="email">다른 이메일 입력</label>
					<input type="email" id="email" name="email" placeholder="이메일을 입력하세요" required>
				</div>
				<button type="submit" class="btn btn-primary">중복 확인</button>
			</form>
		</th:block>

		<!-- 이메일이 존재하지 않을 때 -->
		<th:block th:if="${!isExist}">
			<div class="message success">
				<strong>[[${email}]]</strong><br>
				사용 가능한 이메일입니다!
			</div>
			<button type="button" class="btn btn-success" onclick="checkEmailClose()">이 이메일로 가입하기</button>
		</th:block>
	</div>
</body>
</html>

