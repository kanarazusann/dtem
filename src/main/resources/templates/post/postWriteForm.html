<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìƒí’ˆ ë“±ë¡í•˜ê¸° - ì˜¤ëŠ˜ë“í…œ</title>
<style>
/* ê³µí†µ ì„¤ì • */
* {
    box-sizing: border-box;
}

body {
    font-family: 'Pretendard', sans-serif;
    background: #fafafa;
    margin: 0;
}

/* ì»¨í…Œì´ë„ˆ */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 7.5rem 20px 2rem;
}

/* ë’¤ë¡œê°€ê¸° */
.back-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #3a5a40;
    text-decoration: none;
    font-weight: 600;
    margin-bottom: 1.5rem;
    transition: opacity 0.3s;
    border: none;
    background: none;
    cursor: pointer;
    padding: 0;
    font: inherit;
}

.back-btn:hover {
    opacity: 0.7;
}

/* í¼ ì»¨í…Œì´ë„ˆ */
.form-container {
    background: white;
    border-radius: 12px;
    padding: 2.5rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.page-title {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.page-subtitle {
    color: #666;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid #f0f0f0;
}

/* í¼ ê·¸ë£¹ */
.form-group {
    margin-bottom: 2rem;
}

.form-label {
    display: block;
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 0.8rem;
    color: #333;
}

.required {
    color: #ff6b6b;
    margin-left: 0.3rem;
}

.form-help {
    color: #999;
    font-size: 0.9rem;
    margin-top: 0.5rem;
}

/* ì´ë¯¸ì§€ ì—…ë¡œë“œ */
.image-upload-section {
    margin-bottom: 2rem;
}

.image-upload-area {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1rem;
}

.image-upload-box {
    border: 3px dashed #e0e0e0;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

/* ì²« ë²ˆì§¸ ì´ë¯¸ì§€ (ëŒ€í‘œ ì´ë¯¸ì§€) - í¬ê²Œ */
.image-upload-box.first-image {
    width: 400px;
    height: 400px;
}

/* ë‚˜ë¨¸ì§€ ì´ë¯¸ì§€ë“¤ - ì‘ê²Œ */
.image-upload-box.small-image {
    width: 150px;
    height: 150px;
}

/* ì—…ë¡œë“œ ë²„íŠ¼ ë°•ìŠ¤ */
.image-upload-box.upload-btn {
    width: 150px;
    height: 150px;
}

.image-upload-box:hover {
    border-color: #3a5a40;
    background: #f8f9fa;
}

.image-upload-box.has-image {
    border-style: solid;
    border-color: #3a5a40;
    padding: 0;
}

.upload-icon {
    font-size: 2.5rem;
    color: #999;
    margin-bottom: 0.5rem;
}

.upload-text {
    color: #999;
    font-size: 0.9rem;
    text-align: center;
}

.image-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.remove-image {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 30px;
    height: 30px;
    background: rgba(0,0,0,0.7);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: background 0.2s;
}

/* ëŒ€í‘œ ì´ë¯¸ì§€ ë±ƒì§€ */
.main-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #3a5a40;
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
}

.remove-image:hover {
    background: rgba(255,0,0,0.8);
}

.image-count {
    color: #3a5a40;
    font-weight: 600;
    margin-top: 0.5rem;
}

/* ì…ë ¥ í•„ë“œ */
.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    transition: border-color 0.3s;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: #3a5a40;
}

.form-textarea {
    resize: vertical;
    min-height: 150px;
    line-height: 1.6;
}

/* ê°€ê²© ì…ë ¥ */
.price-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.price-input {
    flex: 1;
    text-align: right;
    font-size: 1.2rem;
    font-weight: 600;
}

.currency {
    font-size: 1.1rem;
    font-weight: 600;
    color: #3a5a40;
}

.price-suggestions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.8rem;
    flex-wrap: wrap;
}

.price-tag {
    padding: 6px 14px;
    background: #f8f9fa;
    border: 2px solid #e0e0e0;
    border-radius: 20px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
}

.price-tag:hover {
    border-color: #3a5a40;
    background: #f0f4ff;
}

/* ë¼ë””ì˜¤/ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ */
.radio-group,
.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
}

.radio-item,
.checkbox-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 10px 18px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.radio-item:hover,
.checkbox-item:hover {
    border-color: #3a5a40;
    background: #f8f9fa;
}

.radio-item input[type="radio"],
.checkbox-item input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.radio-item input[type="radio"]:checked + label,
.checkbox-item input[type="checkbox"]:checked + label {
    color: #3a5a40;
    font-weight: 600;
}

.radio-item:has(input:checked),
.checkbox-item:has(input:checked) {
    border-color: #3a5a40;
    background: #f0f4ff;
}

/* ìœ„ì¹˜ ì…ë ¥ */
.location-input-wrapper {
    display: flex;
    gap: 0.8rem;
}

.location-input-wrapper .form-input {
    flex: 1;
}

.btn-search {
    padding: 12px 24px;
    background: #3a5a40;
    border: 2px solid #3a5a40;
    color: white;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    font-size: 1rem; 
}

/* ì§€ì—­ ì„ íƒ ëª¨ë‹¬ */
.location-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 9999;
    justify-content: center;
    align-items: center;
}

.location-modal.active {
    display: flex;
}

.location-modal-content {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
}

.location-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #f0f0f0;
}

.location-modal-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: #333;
}

.location-modal-close {
    width: 32px;
    height: 32px;
    background: none;
    border: none;
    font-size: 1.8rem;
    color: #999;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.location-modal-close:hover {
    color: #333;
}

.location-step {
    margin-bottom: 1.5rem;
}

.location-step-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    color: #3a5a40;
}

.location-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 0.8rem;
}

.location-btn {
    padding: 12px 16px;
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.location-btn:hover {
    border-color: #3a5a40;
    background: #f8f9fa;
}

.location-btn.selected {
    border-color: #3a5a40;
    background: #3a5a40;
    color: white;
    font-weight: 600;
}

.location-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.location-result {
    margin-top: 1.5rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 8px;
    border: 2px solid #3a5a40;
}

.location-result-label {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 0.5rem;
}

.location-result-text {
    font-size: 1.2rem;
    font-weight: 600;
    color: #3a5a40;
}

.location-modal-footer {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid #f0f0f0;
    display: flex;
    gap: 1rem;
}

.location-modal-footer .btn {
    flex: 1;
}

/* ë„¤ê³  ì˜µì…˜ */
.nego-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 8px;
}

.nego-option input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

/* ë²„íŠ¼ ê·¸ë£¹ */
.form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 2px solid #f0f0f0;
}

.btn {
    flex: 1;
    padding: 16px;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-primary {
    background: #3a5a40;
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
}

.btn-secondary {
    background: white;
    border: 2px solid #3a5a40;
    color: #3a5a40;
}

.btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
}


/* í‘¸í„° */
footer {
    background: #2c3e50;
    color: white;
    padding: 2rem 0;
    margin-top: 4rem;
    text-align: center;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
    .form-container {
        padding: 1.5rem;
    }
    
    .image-upload-area {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .location-input-wrapper {
        flex-direction: column;
    }
}
</style>
</head>
<body>
	<div th:replace="~{layouts/header.html}"></div>
    
    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="container">
        <div class="form-container">
            <h1 class="page-title">ìƒí’ˆ ë“±ë¡í•˜ê¸°</h1>
            <p class="page-subtitle">ì •í™•í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì‹œë©´ ë” ë¹ ë¥´ê²Œ ê±°ë˜í•  ìˆ˜ ìˆì–´ìš”</p>
            
            <form id="productForm" method="post" action="/post/postWrite" enctype="multipart/form-data">
                <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                <div class="form-group image-upload-section">
                    <label class="form-label">ìƒí’ˆ ì´ë¯¸ì§€<span class="required">*</span></label>
                    <div class="image-upload-area">
                        <div class="image-upload-box upload-btn" onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">ğŸ“·</div>
                            <div class="upload-text">ì‚¬ì§„ ì¶”ê°€<br>(ìµœëŒ€ 10ì¥)</div>
                        </div>
                        <!-- ì´ë¯¸ì§€ í”„ë¦¬ë·°ê°€ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                    <div class="image-count">0 / 10</div>
                    <p class="form-help">* ì²« ë²ˆì§¸ ì‚¬ì§„ì´ ëŒ€í‘œ ì´ë¯¸ì§€ë¡œ ì„¤ì •ë˜ë©°, ìˆœì„œëŒ€ë¡œ ì €ì¥ë©ë‹ˆë‹¤</p>
                    <input type="file" id="imageInput" name="productImages" multiple accept="image/*" style="display: none;">
                </div>
                
                <!-- ìƒí’ˆëª… -->
                <div class="form-group">
                    <label class="form-label" for="title">ìƒí’ˆëª…<span class="required">*</span></label>
                    <input type="text" id="title" name="title" class="form-input" placeholder="ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                    <p class="form-help">* ìƒí’ˆëª…ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                </div>
                
                <!-- ì¹´í…Œê³ ë¦¬ -->
                <div class="form-group">
                    <label class="form-label" for="category">ì¹´í…Œê³ ë¦¬<span class="required">*</span></label>
                    <select id="category" name="category" class="form-select" required>
                        <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="ë””ì§€í„¸/ê°€ì „">ğŸ“± ë””ì§€í„¸/ê°€ì „</option>
                        <option value="ì˜ë¥˜">ğŸ‘• ì˜ë¥˜</option>
                        <option value="ê°€êµ¬/ì¸í…Œë¦¬ì–´">ğŸ  ê°€êµ¬/ì¸í…Œë¦¬ì–´</option>
                        <option value="ë„ì„œ">ğŸ“š ë„ì„œ</option>
                        <option value="ì·¨ë¯¸/ê²Œì„">ğŸ® ì·¨ë¯¸/ê²Œì„</option>
                        <option value="ë·°í‹°">ğŸ’„ ë·°í‹°</option>
                        <option value="ìŠ¤í¬ì¸ /ë ˆì €">âš½ ìŠ¤í¬ì¸ /ë ˆì €</option>
                        <option value="ìœ ì•„ë™/ì¶œì‚°">ğŸ‘¶ ìœ ì•„ë™/ì¶œì‚°</option>
                        <option value="ê°€ê³µì‹í’ˆ">ğŸ” ê°€ê³µì‹í’ˆ</option>
                        <option value="ê¸°íƒ€">ğŸ“¦ ê¸°íƒ€</option>
                    </select>
                </div>
                
                <!-- ê±°ë˜ë°©ì‹ -->
                <div class="form-group">
                    <label class="form-label">ê±°ë˜ë°©ì‹<span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="tradeMethod" value="DIRECT" required>
                            <span>ì§ê±°ë˜</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="tradeMethod" value="DELIVERY">
                            <span>íƒë°°ê±°ë˜</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="tradeMethod" value="BOTH">
                            <span>ì§ê±°ë˜+íƒë°°</span>
                        </label>
                    </div>
                </div>
                
                <!-- ìƒí’ˆìƒíƒœ -->
                <div class="form-group">
                    <label class="form-label">ìƒí’ˆìƒíƒœ<span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="conditionStatus" value="NEW" required>
                            <span>ìƒˆìƒí’ˆ</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="conditionStatus" value="LIKE_NEW">
                            <span>ê±°ì˜ ìƒˆê²ƒ</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="conditionStatus" value="USED">
                            <span>ì‚¬ìš©ê° ìˆìŒ</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="conditionStatus" value="OLD">
                            <span>ë§ì´ ì‚¬ìš©í•¨</span>
                        </label>
                    </div>
                </div>
                
                <!-- ê°€ê²© -->
                <div class="form-group">
                    <label class="form-label" for="price">íŒë§¤ê°€ê²©<span class="required">*</span></label>
                    <div class="price-input-wrapper">
                        <input type="number" id="price" name="price" class="form-input price-input" placeholder="0" min="0" required>
                        <span class="currency">ì›</span>
                    </div>
                    <div class="price-suggestions">
                        <span class="price-tag" onclick="setPrice(10000)">+ 10,000ì›</span>
                        <span class="price-tag" onclick="setPrice(50000)">+ 50,000ì›</span>
                        <span class="price-tag" onclick="setPrice(100000)">+ 100,000ì›</span>
                        <span class="price-tag" onclick="setPrice(500000)">+ 500,000ì›</span>
                    </div>
                    
                    <div class="nego-option" style="margin-top: 1rem;">
                        <input type="checkbox" id="negotiable" name="negotiable" value="Y">
                        <label for="negotiable" style="cursor: pointer;">ê°€ê²© ì œì•ˆ ë°›ê¸° (ë„¤ê³  ê°€ëŠ¥)</label>
                    </div>
                </div>
                
                <!-- ê±°ë˜ í¬ë§ ì§€ì—­ -->
                <div class="form-group">
                    <label class="form-label" for="location">ê±°ë˜ í¬ë§ ì§€ì—­<span class="required">*</span></label>
                    <div class="location-input-wrapper">
                        <input type="text" id="location" name="location" class="form-input" placeholder="ì˜ˆ) ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™" required readonly>
                        <button type="button" class="btn-search" onclick="openLocationModal()">ğŸ” ê²€ìƒ‰</button>
                    </div>
                    <p class="form-help">* ì§ê±°ë˜ë¥¼ ì›í•˜ì‹œëŠ” ê²½ìš° ìƒì„¸ ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                </div>
                
                <!-- ìƒì„¸ ì„¤ëª… -->
                <div class="form-group">
                    <label class="form-label" for="content">ìƒì„¸ ì„¤ëª…<span class="required">*</span></label>
                    <textarea id="content" name="content" class="form-textarea" placeholder="ìƒí’ˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.

ì˜ˆì‹œ:
- êµ¬ë§¤ ì‹œê¸°
- ì‚¬ìš© ê¸°ê°„
- ìƒí’ˆ ìƒíƒœ
- í•˜ì ì—¬ë¶€
- ê±°ë˜ ë°©ë²•
- ê¸°íƒ€ íŠ¹ì´ì‚¬í•­" required></textarea>
                    <p class="form-help">* 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                </div>
                
                <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="history.back()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn btn-primary">ë“±ë¡í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- ì§€ì—­ ì„ íƒ ëª¨ë‹¬ -->
    <div id="locationModal" class="location-modal">
        <div class="location-modal-content">
            <div class="location-modal-header">
                <h2 class="location-modal-title">ê±°ë˜ í¬ë§ ì§€ì—­ ì„ íƒ</h2>
                <button type="button" class="location-modal-close" onclick="closeLocationModal()">Ã—</button>
            </div>
            
            <!-- ì‹œ/ë„ ì„ íƒ -->
            <div class="location-step" id="step1">
                <div class="location-step-title">1ë‹¨ê³„: ì‹œ/ë„ ì„ íƒ</div>
                <div class="location-buttons" id="sidoButtons"></div>
            </div>
            
            <!-- êµ¬/êµ° ì„ íƒ -->
            <div class="location-step" id="step2" style="display: none;">
                <div class="location-step-title">2ë‹¨ê³„: êµ¬/êµ° ì„ íƒ</div>
                <div class="location-buttons" id="guButtons"></div>
            </div>
            
            <!-- ë™ ì„ íƒ -->
            <div class="location-step" id="step3" style="display: none;">
                <div class="location-step-title">3ë‹¨ê³„: ë™ ì„ íƒ</div>
                <div class="location-buttons" id="dongButtons"></div>
            </div>
            
            <!-- ì„ íƒ ê²°ê³¼ -->
            <div class="location-result" id="locationResult" style="display: none;">
                <div class="location-result-label">ì„ íƒí•œ ì§€ì—­</div>
                <div class="location-result-text" id="selectedLocationText"></div>
            </div>
            
            <div class="location-modal-footer">
                <button type="button" class="btn btn-secondary" onclick="history.back()">ì·¨ì†Œ</button>
                <button type="button" class="btn btn-primary" onclick="confirmLocation()" id="confirmBtn" disabled>í™•ì¸</button>
            </div>
        </div>
    </div>
    
	<div th:replace="~{layouts/footer.html}"></div>
    
    <script src="/js/locationData.js"></script>
    <script>
        let uploadedImages = [];
        
        // ì§€ì—­ ì„ íƒ ê´€ë ¨ ë³€ìˆ˜
        let selectedSido = null;
        let selectedGu = null;
        let selectedDong = null;
        
        // ì§€ì—­ ì„ íƒ ëª¨ë‹¬ ì—´ê¸°
        function openLocationModal() {
            document.getElementById('locationModal').classList.add('active');
            loadSidoButtons();
            resetLocationSelection();
        }
        
        // ì§€ì—­ ì„ íƒ ëª¨ë‹¬ ë‹«ê¸°
        function closeLocationModal() {
            document.getElementById('locationModal').classList.remove('active');
        }
        
        // ì§€ì—­ ì„ íƒ ì´ˆê¸°í™”
        function resetLocationSelection() {
            selectedSido = null;
            selectedGu = null;
            selectedDong = null;
            
            document.getElementById('step2').style.display = 'none';
            document.getElementById('step3').style.display = 'none';
            document.getElementById('locationResult').style.display = 'none';
            document.getElementById('confirmBtn').disabled = true;
        }
        
        // ì‹œ/ë„ ë²„íŠ¼ ë¡œë“œ
        function loadSidoButtons() {
            const sidoButtons = document.getElementById('sidoButtons');
            sidoButtons.innerHTML = '';
            
            for (const sido in locationData) {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'location-btn';
                btn.textContent = sido;
                btn.onclick = () => selectSido(sido);
                sidoButtons.appendChild(btn);
            }
        }
        
        // ì‹œ/ë„ ì„ íƒ
        function selectSido(sido) {
            selectedSido = sido;
            selectedGu = null;
            selectedDong = null;
            
            // ì‹œ/ë„ ë²„íŠ¼ í™œì„±í™” í‘œì‹œ
            document.querySelectorAll('#sidoButtons .location-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === sido) {
                    btn.classList.add('selected');
                }
            });
            
            // êµ¬/êµ° ë²„íŠ¼ ë¡œë“œ
            loadGuButtons(sido);
            
            // 2ë‹¨ê³„ í‘œì‹œ, 3ë‹¨ê³„ ìˆ¨ê¹€
            document.getElementById('step2').style.display = 'block';
            document.getElementById('step3').style.display = 'none';
            
            // ì„ íƒ ê²°ê³¼ í‘œì‹œ (ì‹œ/ë„ë§Œ ì„ íƒí•œ ìƒíƒœ)
            document.getElementById('selectedLocationText').textContent = selectedSido;
            document.getElementById('locationResult').style.display = 'block';
            document.getElementById('confirmBtn').disabled = false;
        }
        
        // êµ¬/êµ° ë²„íŠ¼ ë¡œë“œ
        function loadGuButtons(sido) {
            const guButtons = document.getElementById('guButtons');
            guButtons.innerHTML = '';
            
            const guData = locationData[sido];
            for (const gu in guData) {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'location-btn';
                btn.textContent = gu;
                btn.onclick = () => selectGu(gu);
                guButtons.appendChild(btn);
            }
        }
        
        // êµ¬/êµ° ì„ íƒ
        function selectGu(gu) {
            selectedGu = gu;
            selectedDong = null;
            
            // êµ¬/êµ° ë²„íŠ¼ í™œì„±í™” í‘œì‹œ
            document.querySelectorAll('#guButtons .location-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === gu) {
                    btn.classList.add('selected');
                }
            });
            
            // ë™ ë²„íŠ¼ ë¡œë“œ
            loadDongButtons(selectedSido, gu);
            
            // 3ë‹¨ê³„ í‘œì‹œ
            document.getElementById('step3').style.display = 'block';
            
            // ì„ íƒ ê²°ê³¼ í‘œì‹œ (ì‹œ/ë„ + ì‹œ/êµ°/êµ¬ ì„ íƒí•œ ìƒíƒœ)
            const partialLocation = `${selectedSido} ${selectedGu}`;
            document.getElementById('selectedLocationText').textContent = partialLocation;
            document.getElementById('locationResult').style.display = 'block';
            document.getElementById('confirmBtn').disabled = false;
        }
        
        // ë™ ë²„íŠ¼ ë¡œë“œ
        function loadDongButtons(sido, gu) {
            const dongButtons = document.getElementById('dongButtons');
            dongButtons.innerHTML = '';
            
            const dongData = locationData[sido][gu];
            dongData.forEach(dong => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'location-btn';
                btn.textContent = dong;
                btn.onclick = () => selectDong(dong);
                dongButtons.appendChild(btn);
            });
        }
        
        // ë™ ì„ íƒ
        function selectDong(dong) {
            selectedDong = dong;
            
            // ë™ ë²„íŠ¼ í™œì„±í™” í‘œì‹œ
            document.querySelectorAll('#dongButtons .location-btn').forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === dong) {
                    btn.classList.add('selected');
                }
            });
            
            // ì„ íƒ ê²°ê³¼ í‘œì‹œ
            const fullLocation = `${selectedSido} ${selectedGu} ${selectedDong}`;
            document.getElementById('selectedLocationText').textContent = fullLocation;
            document.getElementById('locationResult').style.display = 'block';
            document.getElementById('confirmBtn').disabled = false;
        }
        
        // ì§€ì—­ ì„ íƒ í™•ì¸
        function confirmLocation() {
            let location = '';
            
            if (selectedDong) {
                // ë™ê¹Œì§€ ì„ íƒí•œ ê²½ìš°
                location = `${selectedSido} ${selectedGu} ${selectedDong}`;
            } else if (selectedGu) {
                // ì‹œ/êµ°/êµ¬ê¹Œì§€ë§Œ ì„ íƒí•œ ê²½ìš°
                location = `${selectedSido} ${selectedGu}`;
            } else if (selectedSido) {
                // ì‹œ/ë„ë§Œ ì„ íƒí•œ ê²½ìš°
                location = selectedSido;
            }
            
            if (location) {
                document.getElementById('location').value = location;
                closeLocationModal();
            }
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('locationModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLocationModal();
            }
        });
        
        // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
        document.getElementById('imageInput').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const maxImages = 10;
            const remainingSlots = maxImages - uploadedImages.length;
            
            if (files.length > remainingSlots) {
                alert(`ìµœëŒ€ ${maxImages}ì¥ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                return;
            }
            
            files.forEach(file => {
                if (uploadedImages.length >= maxImages) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    uploadedImages.push({
                        file: file,
                        dataUrl: event.target.result
                    });
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            });
            
            // input ì´ˆê¸°í™”
            e.target.value = '';
        });
        
        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        function updateImagePreview() {
            const container = document.querySelector('.image-upload-area');
            const uploadBox = container.querySelector('.image-upload-box:first-child');
            
            // ê¸°ì¡´ í”„ë¦¬ë·° ì œê±°
            const existingPreviews = container.querySelectorAll('.image-upload-box:not(:first-child)');
            existingPreviews.forEach(el => el.remove());
            
            // ìƒˆ í”„ë¦¬ë·° ì¶”ê°€
            uploadedImages.forEach((img, index) => {
                const previewBox = document.createElement('div');
                
                // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ëŠ” í¬ê²Œ, ë‚˜ë¨¸ì§€ëŠ” ì‘ê²Œ
                if (index === 0) {
                    previewBox.className = 'image-upload-box has-image first-image';
                    previewBox.innerHTML = `
                        <div class="main-badge">ëŒ€í‘œ ì´ë¯¸ì§€</div>
                        <img src="${img.dataUrl}" class="image-preview" alt="ëŒ€í‘œ ì´ë¯¸ì§€">
                        <button type="button" class="remove-image" onclick="removeImage(${index})">Ã—</button>
                    `;
                } else {
                    previewBox.className = 'image-upload-box has-image small-image';
                    previewBox.innerHTML = `
                        <img src="${img.dataUrl}" class="image-preview" alt="Preview ${index + 1}">
                        <button type="button" class="remove-image" onclick="removeImage(${index})">Ã—</button>
                    `;
                }
                
                container.appendChild(previewBox);
            });
            
            // ì´ë¯¸ì§€ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
            document.querySelector('.image-count').textContent = `${uploadedImages.length} / 10`;
            
            // ì—…ë¡œë“œ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
            if (uploadedImages.length >= 10) {
                uploadBox.style.display = 'none';
            } else {
                uploadBox.style.display = 'flex';
            }
        }
        
        // ì´ë¯¸ì§€ ì œê±°
        function removeImage(index) {
            uploadedImages.splice(index, 1);
            updateImagePreview();
        }
        
        // ê°€ê²© ì„¤ì •
        function setPrice(amount) {
            const priceInput = document.getElementById('price');
            const currentPrice = parseInt(priceInput.value) || 0;
            priceInput.value = currentPrice + amount;
        }
        
        // ë¯¸ë¦¬ë³´ê¸°
        function previewPost() {
            if (!validateForm()) {
                return;
            }
            alert('ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.');
        }
        
        // í¼ ìœ íš¨ì„± ê²€ì‚¬
        function validateForm() {
            if (uploadedImages.length === 0) {
                alert('ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ ìµœì†Œ 1ì¥ ì´ìƒ ë“±ë¡í•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const title = document.getElementById('title').value.trim();
            if (title.length < 2) {
                alert('ìƒí’ˆëª…ì„ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const category = document.getElementById('category').value;
            if (!category) {
                alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const tradeMethod = document.querySelector('input[name="tradeMethod"]:checked');
            if (!tradeMethod) {
                alert('ê±°ë˜ë°©ì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const condition = document.querySelector('input[name="conditionStatus"]:checked');
            if (!condition) {
                alert('ìƒí’ˆìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const price = document.getElementById('price').value;
            if (!price || parseInt(price) <= 0) {
                alert('íŒë§¤ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const location = document.getElementById('location').value.trim();
            if (!location) {
                alert('ê±°ë˜ í¬ë§ ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            const content = document.getElementById('content').value.trim();
            if (content.length < 10) {
                alert('ìƒì„¸ ì„¤ëª…ì„ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            return true;
        }
        
        // í¼ ì œì¶œ
        document.getElementById('productForm').addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
                return false;
            }
            
            // negotiable ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬
            const negotiableCheckbox = document.getElementById('negotiable');
            if (!negotiableCheckbox.checked) {
                negotiableCheckbox.value = 'N';
                negotiableCheckbox.checked = true; // N ê°’ì„ ì „ì†¡í•˜ê¸° ìœ„í•´
            }
            
            // uploadedImages ë°°ì—´ì˜ íŒŒì¼ë“¤ì„ ì‹¤ì œ inputì— í• ë‹¹
            const imageInput = document.getElementById('imageInput');
            const dataTransfer = new DataTransfer();
            
            uploadedImages.forEach(img => {
                dataTransfer.items.add(img.file);
            });
            
            imageInput.files = dataTransfer.files;
            
            // í¼ì´ ì •ìƒì ìœ¼ë¡œ ì„œë²„ë¡œ ì „ì†¡ë¨
        });
    </script>
</body>
</html>