<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì „ì²´ìƒí’ˆ - ì˜¤ëŠ˜ë“í…œ</title>
<style>
/* ===== ê³µí†µ ìŠ¤íƒ€ì¼ ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
        'Helvetica Neue', Arial, sans-serif;
    background-color: #ffffff;
    color: #333;
    padding-top: 100px;
}

/* ê²€ìƒ‰ ì„¹ì…˜ */
.search-section {
	width: 320px; 
	background: white;
	padding: 2rem 15px;
	text-align: center;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
	border: 2px solid #3a5a40; 
	border-radius: 12px; 
}

.search-section h1 {
	font-size: 1.5rem;
	margin-bottom: 1rem;
	color: #3a5a40;
}

.search-section p {
	font-size: 1.1rem;
	color: #666;
	margin-bottom: 2rem;
}

.search-box { 
	display: flex;
	width: 100%;
	margin: auto;	
    gap: 3px;
}

.search-box input {
	flex: 1;
	padding: 10px 12px;
	border: 2px solid #e0e0e0;
	border-radius: 8px;
	font-size: 1rem;
	transition: border-color 0.3s;
}

.search-box input:focus {
	outline: none;
	border-color: #667eea;
}

.search-box button {
	padding: 10px 12px;
	background: #3a5a40;
	color: white;
	border: 2px solid #e0e0e0;
	border-left: none;
	border-radius: 8px;
	font-size: 1rem;
	font-weight: bold;
	cursor: pointer;
	transition: transform 0.2s;
	flex-shrink: 0;  
}

.search-box button:hover {
	transform: translateY(-2px);
}

/* ìœ„ì¹˜ ì„ íƒ ì„¹ì…˜ */
.location-section {
    text-align: left;
}

.location-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #3a5a40;
    margin-bottom: 0.5rem;
}

.location-box {
    display: flex;
    flex-direction: column; /* ì„¸ë¡œ ë°°ì¹˜ */
    gap: 10px;
}

.location-box select {
    padding: 8px 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    color: #333;
    transition: border-color 0.3s;
}

.location-box select:focus {
    outline: none;
    border-color: #667eea;
}

.category-section h2 {
    font-size: 1.2rem;      
    font-weight: 600;
    color: #3a5a40;
    margin-bottom: 0.5rem;
}

.category-radio label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 1rem;
    color: #333; /* ê²€ìƒ‰ì°½ ê¸€ì”¨ ìƒ‰ê³¼ ë™ì¼ */
    cursor: pointer;
}

.category-radio input[type="radio"] {
    margin-right: 8px;
    cursor: pointer;
}

.price-section h2 {
    font-size: 1.2rem; /* ìœ„ì¹˜/ì¹´í…Œê³ ë¦¬ ì œëª©ê³¼ ë™ì¼ */
    font-weight: 600;
    color: #3a5a40;
    margin-bottom: 0.5rem;
}

.price-radio label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 1rem; /* ìœ„ì¹˜/ì¹´í…Œê³ ë¦¬ ë¼ë””ì˜¤ì™€ ë™ì¼ */
    color: #333;
    cursor: pointer;
}

.price-radio input[type="radio"] {
    margin-right: 8px;
    cursor: pointer;
}

.price-input input {
    font-size: 1rem;
    color: #333; /* ê²€ìƒ‰ì°½ê³¼ ë™ì¼ */
}

.price-input button:hover {
    transform: translateY(-2px);
}

/* ===== ì»¨í…Œì´ë„ˆ ===== */
.container { max-width: 1200px; margin: 0 auto; padding: 2rem 20px; }

/* ===== ìƒí’ˆ ëª©ë¡ ===== */
.posts-list { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
.post-item { display: flex; padding: 1.5rem; border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: background 0.2s; }
.post-item:hover { background: #f8f9fa; }
.post-item:last-child { border-bottom: none; }

/* íŒë§¤ì™„ë£Œ ìƒí’ˆ ìŠ¤íƒ€ì¼ */
.post-item.sold { opacity: 0.5; cursor: not-allowed; background: #f5f5f5; }
.post-item.sold:hover { background: #f5f5f5; }

.post-thumbnail {
    width: 150px; height: 150px; background: #e4f7dd;
    border-radius: 8px; display: flex; align-items: center; justify-content: center;
    color: white; font-size: 3rem; flex-shrink: 0;
    object-fit: cover;
}
.post-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

.post-info { flex: 1; padding-left: 1.5rem; display: flex; flex-direction: column; justify-content: space-between; }
.post-header { display: flex; justify-content: space-between; align-items: start; }
.post-details { flex: 1; }
.post-status { padding: 4px 12px; background: #d17a3a; color: white; border-radius: 4px; font-size: 0.85rem; font-weight: bold; }
.post-status.sold { background: #999; }
.post-title-list { font-size: 1.3rem; font-weight: 600; margin-bottom: 0.5rem; color: #333; }
.post-desc { color: #666; margin-bottom: 1rem; line-height: 1.5; }
.post-footer { display: flex; justify-content: space-between; align-items: center; }
.post-price-list { font-size: 1.5rem; font-weight: bold; color: #3a5a40; }
.post-meta-list { display: flex; gap: 1rem; font-size: 0.9rem; color: #999; }
.post-meta-item { display: flex; align-items: center; gap: 0.3rem; }

/* ===== í˜ì´ì§€ë„¤ì´ì…˜ ===== */
.pagination { display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem; }
.page-btn { display: inline-block; padding: 8px 14px; border: 2px solid #e0e0e0; background: white; border-radius: 6px; cursor: pointer; transition: all 0.2s; text-decoration: none; color: #333;}
.page-btn:hover { border-color: #667eea; color: #667eea; }
.page-btn.active { background: #3a5a40; color: white; border-color: transparent; }

/* ===== í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ===== */
.toast-message {
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    background: linear-gradient(135deg, #3a5a40 0%, #588157 100%);
    color: white;
    padding: 1.2rem 2.5rem;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(58, 90, 64, 0.4);
    font-size: 1.1rem;
    font-weight: 600;
    z-index: 10000;
    opacity: 0;
    animation: slideDown 0.5s ease forwards, fadeOut 0.5s ease 2.5s forwards;
    display: flex;
    align-items: center;
    gap: 0.8rem;
}

.toast-message::before {
    content: 'âœ“';
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: white;
    color: #3a5a40;
    border-radius: 50%;
    font-weight: bold;
    font-size: 1.2rem;
}

@keyframes slideDown {
    to {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    to {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
}
</style>
</head>
<body>
<div th:replace="~{layouts/header.html}"></div>

<!-- ë“±ë¡ ì„±ê³µ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
<script th:if="${param.registered}">
    // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ìƒì„± ë° í‘œì‹œ
    const toast = document.createElement('div');
    toast.className = 'toast-message';
    toast.textContent = 'ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤';
    document.body.appendChild(toast);
    
    // 3ì´ˆ í›„ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ì œê±°
    setTimeout(() => {
        toast.remove();
    }, 3000);
    
    // URLì—ì„œ registered íŒŒë¼ë¯¸í„° ì œê±° (ìƒˆë¡œê³ ì¹¨ ì‹œ ë‹¤ì‹œ ì•ˆ ëœ¨ê²Œ)
    const url = new URL(window.location);
    url.searchParams.delete('registered');
    window.history.replaceState({}, '', url);
</script>

<div class="container" style="display: flex; gap: 2rem;">
    <!-- ì¢Œì¸¡: ê²€ìƒ‰ ì„¹ì…˜ -->
		<aside style="flex: 1;">
			<section class="search-section">
				<h1>ì˜¤ëŠ˜ì˜ ë“í…œì„ ì°¾ì•„ë³´ì„¸ìš”</h1>
				<p>
					ë¯¿ì„ ìˆ˜ ìˆëŠ” ì¤‘ê³ ê±°ë˜,<br> ì˜¤ëŠ˜ë“í…œì—ì„œ ì‹œì‘í•˜ì„¸ìš”
				</p>
				<form id="searchForm" action="/post/postList" method="get">
					<div class="search-box">
						<input type="text" name="title" placeholder="ì–´ë–¤ ìƒí’ˆì„ ì°¾ìœ¼ì‹œë‚˜ìš”?" th:value="${title}">
						<button type="submit">ê²€ìƒ‰</button>
					</div>

					<!-- í•œ ì¤„ ë„ìš°ê¸° -->
					<div style="height: 1.5rem;"></div>

					<!-- ìœ„ì¹˜ ì„ íƒ ì˜ì—­ -->
					<div class="location-section">
						<h2 class="location-title">ìœ„ì¹˜ ì„ íƒ</h2>
						<div class="location-box">
				        <select id="sido" name="sido">
				            <option value="">ì‹œ/ë„ ì„ íƒ</option>
				        </select>
				        <select id="sigungu" name="sigungu" disabled>
				            <option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option>
				        </select>
				        <select id="dong" name="dong" disabled>
				            <option value="">ì/ë©´/ë™ ì„ íƒ</option>
				        </select>
						</div>
					</div>

					<!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ ì˜ì—­ -->
					<div class="category-section"
						style="margin-top: 1.5rem; text-align: left;">
						<h2 class="location-title">ì¹´í…Œê³ ë¦¬ ì„ íƒ</h2>
						<fieldset class="category-radio"
							style="border: none; padding: 0; margin-top: 0.5rem;">
							<label><input type="radio" name="category" value="" th:checked="${category == null or category == ''}"> ì „ì²´ë³´ê¸°</label>
							<label><input type="radio" name="category" value="ë””ì§€í„¸/ê°€ì „" th:checked="${category == 'ë””ì§€í„¸/ê°€ì „'}"> ë””ì§€í„¸/ê°€ì „</label>
							<label><input type="radio" name="category" value="ê°€êµ¬/ì¸í…Œë¦¬ì–´" th:checked="${category == 'ê°€êµ¬/ì¸í…Œë¦¬ì–´'}"> ê°€êµ¬/ì¸í…Œë¦¬ì–´</label>
							<label><input type="radio" name="category" value="ìƒí™œ/ì£¼ë°©" th:checked="${category == 'ìƒí™œ/ì£¼ë°©'}"> ìƒí™œ/ì£¼ë°©</label>
							<label><input type="radio" name="category" value="ìœ ì•„ë™" th:checked="${category == 'ìœ ì•„ë™'}"> ìœ ì•„ë™</label>
							<label><input type="radio" name="category" value="íŒ¨ì…˜/ì¡í™”" th:checked="${category == 'íŒ¨ì…˜/ì¡í™”'}"> íŒ¨ì…˜/ì¡í™”</label>
							<label><input type="radio" name="category" value="ë·°í‹°" th:checked="${category == 'ë·°í‹°'}"> ë·°í‹°</label>
							<label><input type="radio" name="category" value="ì·¨ë¯¸/ë„ì„œ" th:checked="${category == 'ì·¨ë¯¸/ë„ì„œ'}"> ì·¨ë¯¸/ë„ì„œ</label>
							<label><input type="radio" name="category" value="ì‹í’ˆ" th:checked="${category == 'ì‹í’ˆ'}"> ì‹í’ˆ</label>
							<label><input type="radio" name="category" value="ë°˜ë ¤ë™ë¬¼" th:checked="${category == 'ë°˜ë ¤ë™ë¬¼'}"> ë°˜ë ¤ë™ë¬¼</label>
						</fieldset>
					</div>

					<!-- ê°€ê²© ì„ íƒ ì˜ì—­ -->
					<div class="price-section"
						style="margin-top: 1.5rem; text-align: left;">
						<h2 class="location-title">ê°€ê²© ì„ íƒ</h2>
						<!-- ë¼ë””ì˜¤ ë²„íŠ¼ ê°€ê²©ëŒ€ -->
						<fieldset class="price-radio"
							style="border: none; padding: 0; margin-top: 0.5rem;">
							<label><input type="radio" name="priceRange" value="all" checked onclick="setPriceRange('all')"> ì „ì²´ë³´ê¸°</label>
							<label><input type="radio" name="priceRange" value="free" onclick="setPriceRange('free')"> ë‚˜ëˆ”</label>
							<label><input type="radio" name="priceRange" value="5000" onclick="setPriceRange('5000')"> 5,000ì› ì´í•˜</label>
							<label><input type="radio" name="priceRange" value="10000" onclick="setPriceRange('10000')"> 10,000ì› ì´í•˜</label>
							<label><input type="radio" name="priceRange" value="20000" onclick="setPriceRange('20000')"> 20,000ì› ì´í•˜</label>
						</fieldset>

						<!-- ì§ì ‘ ê°€ê²© ì…ë ¥ -->
						<div class="price-input"
							style="display: flex; gap: 5px; margin-top: 0.5rem;">
							<input type="number" id="minPriceInput" name="minPrice" placeholder="ìµœì†Œê°€ê²©" min="0" th:value="${minPrice}"
								style="padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; height: 38px; width: 100px;">
							<span style="align-self: center;">~</span>
							<input type="number" id="maxPriceInput" name="maxPrice" placeholder="ìµœëŒ€ê°€ê²©" min="0" th:value="${maxPrice}"
								style="padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; height: 38px; width: 100px;">
						</div>
					</div>
				</form>
			</section>
		</aside>

    <!-- ìš°ì¸¡: ìƒí’ˆ ëª©ë¡ -->
    <main style="flex: 3; display: flex; flex-direction: column; gap: 2rem;">
       <!-- ìƒí’ˆ ëª©ë¡ -->
		<div class="posts-list">
		    <!-- ê²Œì‹œë¬¼ì´ ì—†ì„ ë•Œ -->
		    <div th:if="${#lists.isEmpty(posts)}" style="padding: 3rem; text-align: center; color: #666;">
		        <p style="font-size: 1.2rem; margin-bottom: 0.5rem;">ğŸ˜¢ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
		        <p style="font-size: 0.9rem;">ë‹¤ë¥¸ ê²€ìƒ‰ ì¡°ê±´ì„ ì‹œë„í•´ë³´ì„¸ìš”</p>
		    </div>
		    
		    <!-- ê²Œì‹œë¬¼ ëª©ë¡ -->
		    <div class="post-item"
		         th:each="post : ${posts}"
		         th:classappend="${post.status == 'SOLD'} ? 'sold' : ''"
		         th:onclick="${post.status != 'SOLD'} ? 'goToPostView('+${post.postId}+')' : ''">
		
		        <!-- ì¸ë„¤ì¼ ì´ë¯¸ì§€ -->
		        <div class="post-thumbnail">
		            <img th:if="${post.postImage != null and !#strings.isEmpty(post.postImage)}"
		                 th:src="${#strings.contains(post.postImage, ',') ? #strings.substringBefore(post.postImage, ',') : post.postImage}"
		                 alt="ìƒí’ˆ ì´ë¯¸ì§€">
		            <span th:unless="${post.postImage != null and !#strings.isEmpty(post.postImage)}">ğŸ“·</span>
		        </div>
		        
		        <div class="post-info">
		            <div class="post-header">
		                <div class="post-details">
		                    <div class="post-title-list" th:text="${post.title}">ìƒí’ˆëª…</div>
		                    <div class="post-desc" th:text="${post.content}">ìƒí’ˆ ì„¤ëª…</div>
		                </div>
		
		                <!-- íŒë§¤ìƒíƒœ -->
		                <div class="post-status"
		                     th:classappend="${post.status == 'SOLD'} ? ' sold' : ''"
		                     th:text="${post.status == 'SOLD'} ? 'íŒë§¤ì™„ë£Œ' : (${post.status == 'RESERVED'} ? 'ì˜ˆì•½ì¤‘' : 'íŒë§¤ì¤‘')">
		                    íŒë§¤ì¤‘
		                </div>
		            </div>
		
		            <div class="post-footer">
		                <div class="post-price-list"
		                     th:text="${#numbers.formatInteger(post.price, 0, 'COMMA') + 'ì›'}">
		                     0ì›
		                </div>
		
		                <div class="post-meta-list">
		                    <!-- ìœ„ì¹˜ ì •ë³´ í‘œì‹œ -->
		                    <span class="post-meta-item" th:text="'ğŸ“ ' + ${post.location}">ğŸ“ ì§€ì—­ì •ë³´</span>
		                    <span class="post-meta-item" th:text="'ğŸ‘ ' + ${post.hit}">ğŸ‘ 0</span>
		                    <span class="post-meta-item" th:text="'â¤ï¸ ' + ${post.wishlistCount}">â¤ï¸ 0</span>
		                    <span class="post-meta-item" th:text="'â° ' + ${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">
		                        â° ë“±ë¡ì¼
		                    </span>
		                </div>
		            </div>
		        </div>
		    </div>
		</div>


        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
        <div class="pagination" th:if="${totalPages > 0 and !#lists.isEmpty(posts)}">
            <!-- ì´ì „ ë²„íŠ¼ -->
            <a class="page-btn" 
               th:if="${startPage > 1}"
               th:href="@{'/post/postList'(pg=${startPage - 1}, sort=${sort}, title=${title}, sido=${sido}, sigungu=${sigungu}, dong=${dong}, category=${category}, minPrice=${minPrice}, maxPrice=${maxPrice})}">
                ì´ì „
            </a>
            
            <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
		    <a class="page-btn"
		       th:each="i : ${#numbers.sequence(startPage, endPage)}"
		       th:text="${i}"
		       th:href="@{'/post/postList'(pg=${i}, sort=${sort}, title=${title}, sido=${sido}, sigungu=${sigungu}, dong=${dong}, category=${category}, minPrice=${minPrice}, maxPrice=${maxPrice})}"
		       th:classappend="${i==currentPage}?' active':''">
		    </a>
		    
		    <!-- ë‹¤ìŒ ë²„íŠ¼ -->
		    <a class="page-btn"
		       th:if="${endPage < totalPages}"
		       th:href="@{'/post/postList'(pg=${endPage + 1}, sort=${sort}, title=${title}, sido=${sido}, sigungu=${sigungu}, dong=${dong}, category=${category}, minPrice=${minPrice}, maxPrice=${maxPrice})}">
		        ë‹¤ìŒ
		    </a>
		</div>
    </main>
</div>

<div th:replace="~{layouts/footer.html}"></div>

<script src="/js/locationData.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    // locationDataê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (typeof locationData === 'undefined') {
        console.error('locationData.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!');
    }
    
    const regionData = typeof locationData !== 'undefined' ? locationData : {};

    let selectedSido = /*[[${sido}]]*/ '';
    let selectedSigungu = /*[[${sigungu}]]*/ '';
    let selectedDong = /*[[${dong}]]*/ '';

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', function() {
        console.log('í˜ì´ì§€ ë¡œë“œë¨, regionData:', regionData);
        
        // í˜„ì¬ postList URLì„ sessionStorageì— ì €ì¥ (postViewì—ì„œ ëŒì•„ì˜¬ ë•Œ ì‚¬ìš©)
        sessionStorage.setItem('postListUrl', window.location.href);
        
        loadSidoOptions();
        
        // ê²€ìƒ‰ ì¡°ê±´ì´ ìˆìœ¼ë©´ ë³µì›
        if (selectedSido) {
            document.getElementById('sido').value = selectedSido;
            loadSigunguOptions(selectedSido);
            
            if (selectedSigungu) {
                setTimeout(() => {
                    document.getElementById('sigungu').value = selectedSigungu;
                    loadDongOptions(selectedSido, selectedSigungu);
                    
                    if (selectedDong) {
                        setTimeout(() => {
                            document.getElementById('dong').value = selectedDong;
                        }, 50);
                    }
                }, 50);
            }
        }
    });

    // ì‹œ/ë„ ëª©ë¡ ë¡œë“œ
    function loadSidoOptions() {
        const sidoSelect = document.getElementById('sido');
        for (const sido in regionData) {
            const option = document.createElement('option');
            option.value = sido;
            option.textContent = sido;
            sidoSelect.appendChild(option);
        }
    }

    // ì‹œ/êµ°/êµ¬ ëª©ë¡ ë¡œë“œ
    function loadSigunguOptions(sido) {
        const sigunguSelect = document.getElementById('sigungu');
        const dongSelect = document.getElementById('dong');
        
        sigunguSelect.innerHTML = '<option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option>';
        dongSelect.innerHTML = '<option value="">ì/ë©´/ë™ ì„ íƒ</option>';
        dongSelect.disabled = true;
        
        if (sido && regionData[sido]) {
            sigunguSelect.disabled = false;
            for (const sigungu in regionData[sido]) {
                const option = document.createElement('option');
                option.value = sigungu;
                option.textContent = sigungu;
                sigunguSelect.appendChild(option);
            }
        } else {
            sigunguSelect.disabled = true;
        }
    }

    // ì/ë©´/ë™ ëª©ë¡ ë¡œë“œ
    function loadDongOptions(sido, sigungu) {
        const dongSelect = document.getElementById('dong');
        dongSelect.innerHTML = '<option value="">ì/ë©´/ë™ ì„ íƒ</option>';
        
        if (sido && sigungu && regionData[sido] && regionData[sido][sigungu]) {
            dongSelect.disabled = false;
            const dongList = regionData[sido][sigungu];
            dongList.forEach(dong => {
                const option = document.createElement('option');
                option.value = dong;
                option.textContent = dong;
                dongSelect.appendChild(option);
            });
        } else {
            dongSelect.disabled = true;
        }
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.getElementById('sido').addEventListener('change', function() {
        selectedSido = this.value;
        selectedSigungu = '';
        selectedDong = '';
        loadSigunguOptions(selectedSido);
    });

    document.getElementById('sigungu').addEventListener('change', function() {
        selectedSigungu = this.value;
        selectedDong = '';
        loadDongOptions(selectedSido, selectedSigungu);
    });

    document.getElementById('dong').addEventListener('change', function() {
        selectedDong = this.value;
    });

    // ê°€ê²© ë²”ìœ„ ì„¤ì •
    function setPriceRange(range) {
        const minPriceInput = document.getElementById('minPriceInput');
        const maxPriceInput = document.getElementById('maxPriceInput');
        
        switch(range) {
            case 'all':
                minPriceInput.value = '';
                maxPriceInput.value = '';
                break;
            case 'free':
                minPriceInput.value = '0';
                maxPriceInput.value = '0';
                break;
            case '5000':
                minPriceInput.value = '0';
                maxPriceInput.value = '5000';
                break;
            case '10000':
                minPriceInput.value = '0';
                maxPriceInput.value = '10000';
                break;
            case '20000':
                minPriceInput.value = '0';
                maxPriceInput.value = '20000';
                break;
        }
    }

    // ì¹´í…Œê³ ë¦¬ ë¼ë””ì˜¤ ë²„íŠ¼ì— í¼ ì œì¶œ ì´ë²¤íŠ¸ ì¶”ê°€
    document.querySelectorAll('input[name="category"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.getElementById('searchForm').submit();
        });
    });
    
    // postViewë¡œ ì´ë™í•˜ë©´ì„œ í˜„ì¬ í˜ì´ì§€ ì •ë³´ ì „ë‹¬
    function goToPostView(postId) {
        const urlParams = new URLSearchParams(window.location.search);
        const pg = urlParams.get('pg') || '1';
        const sort = urlParams.get('sort') || '';
        const title = urlParams.get('title') || '';
        const sido = urlParams.get('sido') || '';
        const sigungu = urlParams.get('sigungu') || '';
        const dong = urlParams.get('dong') || '';
        const category = urlParams.get('category') || '';
        const minPrice = urlParams.get('minPrice') || '';
        const maxPrice = urlParams.get('maxPrice') || '';
        
        let postViewUrl = '/post/postView/' + postId + '?';
        const params = [];
        
        if (pg) params.push('pg=' + pg);
        if (sort) params.push('sort=' + sort);
        if (title) params.push('title=' + encodeURIComponent(title));
        if (sido) params.push('sido=' + encodeURIComponent(sido));
        if (sigungu) params.push('sigungu=' + encodeURIComponent(sigungu));
        if (dong) params.push('dong=' + encodeURIComponent(dong));
        if (category) params.push('category=' + encodeURIComponent(category));
        if (minPrice) params.push('minPrice=' + minPrice);
        if (maxPrice) params.push('maxPrice=' + maxPrice);
        
        location.href = postViewUrl + params.join('&');
    }
    /*]]>*/
</script>
</body>
</html>
