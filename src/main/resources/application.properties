spring.application.name=dtem

# 서버 포트 설정 (Railway 자동 할당)
server.port=${PORT:8080}

# 데이터베이스 설정 (Railway PostgreSQL)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/dtem}
spring.datasource.driver-class-name=org.postgresql.Driver
# Railway는 DATABASE_URL에 username/password 포함되어 있음
spring.sql.init.mode=never
spring.jpa.hibernate.ddl-auto=update

# JPA 설정 (PostgreSQL)
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# SEQUENCE 설정
spring.jpa.properties.hibernate.id.new_generator_mappings=true

# 타임스탬프 설정
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Seoul

# 로깅 설정 (Railway는 메모리 절약을 위해 최소화)
logging.level.root=WARN
logging.level.com.example.dtem=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.springframework.boot.autoconfigure=ERROR

# 메일 발송 설정 (Gmail 사용) - Railway에서는 선택적으로 비활성화
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_SMTP_STARTTLS:true}
spring.mail.properties.mail.smtp.starttls.required=${MAIL_SMTP_STARTTLS_REQUIRED:false}
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# 메일 발송자 정보
mail.from.address=noreply@onultem.com
mail.from.name=오늘득템

# 파일 업로드 설정
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
# Railway는 임시 파일 시스템 사용 (재시작 시 삭제됨 - 추후 S3 사용 권장)
file.upload.dir=${UPLOAD_DIR:/tmp/uploads/posts}
file.upload.profile.dir=${UPLOAD_PROFILE_DIR:/tmp/uploads/profiles}

